<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>The Python API &#8212; lincs 1.1.0a11 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=4f649999" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=039e1c02" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=eafc0fe6" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js?v=7f42ce73"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=4825356b"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Reference" href="reference.html" />
    <link rel="prev" title="User Guide" href="user-guide.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <!-- WARNING: this file is generated from 'doc-sources/python-api/python-api.ipynb'. MANUAL EDITS WILL BE LOST. -->
<section id="the-python-api">
<h1>The Python API<a class="headerlink" href="#the-python-api" title="Permalink to this heading">¶</a></h1>
<p>This document builds up on <a class="reference internal" href="get-started.html"><span class="doc">our “Get Started” guide</span></a> and our <a class="reference internal" href="user-guide.html"><span class="doc">user guide</span></a>, and introduces <em>lincs</em>’ Python API.
This API is more flexible, albeit more complex, than the command-line interface you’ve been using so far.</p>
<p>If you’re a Jupyter user, you can <a class="reference download internal" download="" href="_downloads/019271a03d05a599bcfb6d68c868c86a/python-api.ipynb"><span class="xref download myst">download the notebook</span></a> this document is based on.</p>
<section id="do-it-again-in-python">
<h2>Do it again, in Python<a class="headerlink" href="#do-it-again-in-python" title="Permalink to this heading">¶</a></h2>
<p>First, lets do exactly the same thing as in our “Get started” guide, but using the Python API.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">lincs</span> <span class="kn">import</span> <span class="n">classification</span> <span class="k">as</span> <span class="n">lc</span>
</pre></div>
</div>
<p>Generate a synthetic classification problem:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">generate_problem</span><span class="p">(</span><span class="n">criteria_count</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">categories_count</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">random_seed</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
</pre></div>
</div>
<p>The first difference with the command-line interface is the third argument to the call to <code class="docutils literal notranslate"><span class="pre">generate_problem</span></code>: it’s the pseudo-random seed optionally passed by the <code class="docutils literal notranslate"><span class="pre">--random-seed</span></code> option on the command line. All pseudo-random seeds are mandatory in the Python API, so that you have full control of reproducibility. If you don’t care about it, you can use <code class="docutils literal notranslate"><span class="pre">random.randrange(2**30)</span></code> to use pseudo-random pseudo-random seeds. (No typo here: the pseudo-random seeds are pseudo-random.)</p>
<p>Generated problems are returned as Python objects of class <code class="docutils literal notranslate"><span class="pre">lincs.Problem</span></code>. You can print them:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="n">problem</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">classification-problem</span>
<span class="nt">format_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="nt">criteria</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Criterion 1</span>
<span class="w">    </span><span class="nt">value_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">real</span>
<span class="w">    </span><span class="nt">preference_direction</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">increasing</span>
<span class="w">    </span><span class="nt">min_value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">    </span><span class="nt">max_value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Criterion 2</span>
<span class="w">    </span><span class="nt">value_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">real</span>
<span class="w">    </span><span class="nt">preference_direction</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">increasing</span>
<span class="w">    </span><span class="nt">min_value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">    </span><span class="nt">max_value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Criterion 3</span>
<span class="w">    </span><span class="nt">value_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">real</span>
<span class="w">    </span><span class="nt">preference_direction</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">increasing</span>
<span class="w">    </span><span class="nt">min_value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">    </span><span class="nt">max_value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Criterion 4</span>
<span class="w">    </span><span class="nt">value_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">real</span>
<span class="w">    </span><span class="nt">preference_direction</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">increasing</span>
<span class="w">    </span><span class="nt">min_value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">    </span><span class="nt">max_value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="nt">ordered_categories</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Worst category</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Intermediate category 1</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Best category</span>
</pre></div>
</div>
<p>Description functions generate a list of strings:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lc</span><span class="o">.</span><span class="n">describe_problem</span><span class="p">(</span><span class="n">problem</span><span class="p">)))</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>This a classification problem into 3 ordered categories named &quot;Worst category&quot;, &quot;Intermediate category 1&quot; and &quot;Best category&quot;.
The best category is &quot;Best category&quot; and the worst category is &quot;Worst category&quot;.
There are 4 classification criteria (in no particular order).
Criterion &quot;Criterion 1&quot; takes real values between 0.0 and 1.0 included.
Higher values of &quot;Criterion 1&quot; are known to be better.
Criterion &quot;Criterion 2&quot; takes real values between 0.0 and 1.0 included.
Higher values of &quot;Criterion 2&quot; are known to be better.
Criterion &quot;Criterion 3&quot; takes real values between 0.0 and 1.0 included.
Higher values of &quot;Criterion 3&quot; are known to be better.
Criterion &quot;Criterion 4&quot; takes real values between 0.0 and 1.0 included.
Higher values of &quot;Criterion 4&quot; are known to be better.
</pre></div>
</div>
<p>Generate a synthetic MR-Sort classification model, again with an explicit pseudo-random seed:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">generate_mrsort_model</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">random_seed</span><span class="o">=</span><span class="mi">41</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ncs-classification-model</span>
<span class="nt">format_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="nt">accepted_values</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">thresholds</span>
<span class="w">    </span><span class="nt">thresholds</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0.255905151</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.676961303</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">thresholds</span>
<span class="w">    </span><span class="nt">thresholds</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0.0551739037</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.324553937</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">thresholds</span>
<span class="w">    </span><span class="nt">thresholds</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0.162252158</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.673279881</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">thresholds</span>
<span class="w">    </span><span class="nt">thresholds</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0.0526000932</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.598555863</span><span class="p p-Indicator">]</span>
<span class="nt">sufficient_coalitions</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nl">&amp;coalitions</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">weights</span>
<span class="w">    </span><span class="nt">criterion_weights</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0.147771254</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.618687689</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.406786472</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.0960085914</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nv">*coalitions</span>
</pre></div>
</div>
<p>Visualization functions interface with <a class="reference external" href="https://matplotlib.org/">Matplotlib</a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">layout</span><span class="o">=</span><span class="s2">&quot;constrained&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">lc</span><span class="o">.</span><span class="n">visualize_model</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="p">[],</span> <span class="n">axes</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="png" src="_images/python-api_15_0.png" /></p>
<p>Get the model’s description:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lc</span><span class="o">.</span><span class="n">describe_model</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">model</span><span class="p">)))</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>This is a MR-Sort (a.k.a. 1-Uc-NCS) model: an NCS model where the sufficient coalitions are specified using the same criterion weights for all boundaries.
The weights associated to each criterion are:
  - Criterion &quot;Criterion 1&quot;: 0.15
  - Criterion &quot;Criterion 2&quot;: 0.62
  - Criterion &quot;Criterion 3&quot;: 0.41
  - Criterion &quot;Criterion 4&quot;: 0.10
To get into an upper category, an alternative must be better than the following profiles on a set of criteria whose weights add up to at least 1:
  - For category &quot;Intermediate category 1&quot;: at least 0.26 on criterion &quot;Criterion 1&quot;, at least 0.06 on criterion &quot;Criterion 2&quot;, at least 0.16 on criterion &quot;Criterion 3&quot;, and at least 0.05 on criterion &quot;Criterion 4&quot;
  - For category &quot;Best category&quot;: at least 0.68 on criterion &quot;Criterion 1&quot;, at least 0.32 on criterion &quot;Criterion 2&quot;, at least 0.67 on criterion &quot;Criterion 3&quot;, and at least 0.60 on criterion &quot;Criterion 4&quot;
</pre></div>
</div>
<p>Generate a synthetic learning set (with an explicit pseudo-random seed):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">learning_set</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">generate_alternatives</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">alternatives_count</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">random_seed</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
</pre></div>
</div>
<p>Dump it (in memory instead of on <code class="docutils literal notranslate"><span class="pre">sys.stdout</span></code> to print only the first few lines):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">io</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">()</span>
<span class="n">learning_set</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()[:</span><span class="mi">6</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;...&#39;</span><span class="p">]))</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>name,&quot;Criterion 1&quot;,&quot;Criterion 2&quot;,&quot;Criterion 3&quot;,&quot;Criterion 4&quot;,category
&quot;Alternative 1&quot;,0.37454012,0.796543002,0.95071429,0.183434784,&quot;Best category&quot;
&quot;Alternative 2&quot;,0.731993914,0.779690981,0.598658502,0.596850157,&quot;Intermediate category 1&quot;
&quot;Alternative 3&quot;,0.156018645,0.445832759,0.15599452,0.0999749228,&quot;Worst category&quot;
&quot;Alternative 4&quot;,0.0580836125,0.4592489,0.866176128,0.333708614,&quot;Best category&quot;
&quot;Alternative 5&quot;,0.601114988,0.14286682,0.708072603,0.650888503,&quot;Intermediate category 1&quot;
...
</pre></div>
</div>
<p>Visualize it:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">layout</span><span class="o">=</span><span class="s2">&quot;constrained&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">lc</span><span class="o">.</span><span class="n">visualize_model</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">learning_set</span><span class="o">.</span><span class="n">alternatives</span><span class="p">[:</span><span class="mi">5</span><span class="p">],</span> <span class="n">axes</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="png" src="_images/python-api_23_0.png" /></p>
<p>Let’s now train a new model from this synthetic learning set.
The command-line interface of <code class="docutils literal notranslate"><span class="pre">lincs</span> <span class="pre">learn</span> <span class="pre">classification-model</span></code> accepts quite a few options.
Most of them set up the strategies used for the learning, as described further in our <a class="reference internal" href="user-guide.html"><span class="doc">user guide</span></a>.
When using the Python API, you have to create these strategies yourself:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">learning_data</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">LearnMrsortByWeightsProfilesBreed</span><span class="o">.</span><span class="n">LearningData</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">learning_set</span><span class="p">,</span> <span class="n">models_count</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">random_seed</span><span class="o">=</span><span class="mi">43</span><span class="p">)</span>
<span class="n">profiles_initialization_strategy</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">InitializeProfilesForProbabilisticMaximalDiscriminationPowerPerCriterion</span><span class="p">(</span><span class="n">learning_data</span><span class="p">)</span>
<span class="n">weights_optimization_strategy</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">OptimizeWeightsUsingGlop</span><span class="p">(</span><span class="n">learning_data</span><span class="p">)</span>
<span class="n">profiles_improvement_strategy</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">ImproveProfilesWithAccuracyHeuristicOnCpu</span><span class="p">(</span><span class="n">learning_data</span><span class="p">)</span>
<span class="n">breeding_strategy</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">ReinitializeLeastAccurate</span><span class="p">(</span><span class="n">learning_data</span><span class="p">,</span> <span class="n">profiles_initialization_strategy</span><span class="o">=</span><span class="n">profiles_initialization_strategy</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="n">termination_strategy</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">TerminateAtAccuracy</span><span class="p">(</span><span class="n">learning_data</span><span class="p">,</span> <span class="n">target_accuracy</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">learning_set</span><span class="o">.</span><span class="n">alternatives</span><span class="p">))</span>
</pre></div>
</div>
<p>Then create the learning itself:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">learning</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">LearnMrsortByWeightsProfilesBreed</span><span class="p">(</span>
    <span class="n">learning_data</span><span class="p">,</span>
    <span class="n">profiles_initialization_strategy</span><span class="p">,</span>
    <span class="n">weights_optimization_strategy</span><span class="p">,</span>
    <span class="n">profiles_improvement_strategy</span><span class="p">,</span>
    <span class="n">breeding_strategy</span><span class="p">,</span>
    <span class="n">termination_strategy</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>And <code class="docutils literal notranslate"><span class="pre">.perform</span></code> it to create the learned <code class="docutils literal notranslate"><span class="pre">Model</span></code> object:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">learned_model</span> <span class="o">=</span> <span class="n">learning</span><span class="o">.</span><span class="n">perform</span><span class="p">()</span>
<span class="n">learned_model</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ncs-classification-model</span>
<span class="nt">format_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="nt">accepted_values</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">thresholds</span>
<span class="w">    </span><span class="nt">thresholds</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0.339874953</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.421424538</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">thresholds</span>
<span class="w">    </span><span class="nt">thresholds</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0.0556534864</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.326433569</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">thresholds</span>
<span class="w">    </span><span class="nt">thresholds</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0.162616938</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.67343241</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">thresholds</span>
<span class="w">    </span><span class="nt">thresholds</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0.0878681168</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.252649099</span><span class="p p-Indicator">]</span>
<span class="nt">sufficient_coalitions</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nl">&amp;coalitions</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">weights</span>
<span class="w">    </span><span class="nt">criterion_weights</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1.01327896e-06</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.999998987</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nv">*coalitions</span>
</pre></div>
</div>
<p>Create a testing set and classify it, taking notes of the accuracy of the new model on that testing set:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">testing_set</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">generate_alternatives</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">alternatives_count</span><span class="o">=</span><span class="mi">3000</span><span class="p">,</span> <span class="n">random_seed</span><span class="o">=</span><span class="mi">44</span><span class="p">)</span>
<span class="n">classification_result</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">classify_alternatives</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">learned_model</span><span class="p">,</span> <span class="n">testing_set</span><span class="p">)</span>
<span class="n">classification_result</span><span class="o">.</span><span class="n">changed</span><span class="p">,</span> <span class="n">classification_result</span><span class="o">.</span><span class="n">unchanged</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>(4, 2996)
</pre></div>
</div>
<p>This covers what was done in our “Get started” guide.
As you can see the Python API is more verbose, but for good reasons: it’s more powerful as you’ll see in the next section.</p>
</section>
<section id="do-more-with-the-python-api">
<h2>Do more, with the Python API<a class="headerlink" href="#do-more-with-the-python-api" title="Permalink to this heading">¶</a></h2>
<section id="create-classification-objects">
<h3>Create classification objects<a class="headerlink" href="#create-classification-objects" title="Permalink to this heading">¶</a></h3>
<p>You don’t have to use our pseudo-random generation functions; you can create <code class="docutils literal notranslate"><span class="pre">Problem</span></code>, <code class="docutils literal notranslate"><span class="pre">Model</span></code>, <em>etc.</em> instances yourself.</p>
<section id="create-a-problem">
<h4>Create a <code class="docutils literal notranslate"><span class="pre">Problem</span></code><a class="headerlink" href="#create-a-problem" title="Permalink to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">Problem</span><span class="p">(</span>
    <span class="n">criteria</span><span class="o">=</span><span class="p">[</span>
        <span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="p">(</span><span class="s2">&quot;Physics grade&quot;</span><span class="p">,</span> <span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="o">.</span><span class="n">IntegerValues</span><span class="p">(</span><span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="o">.</span><span class="n">PreferenceDirection</span><span class="o">.</span><span class="n">increasing</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">)),</span>
        <span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="p">(</span><span class="s2">&quot;Literature grade&quot;</span><span class="p">,</span> <span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="o">.</span><span class="n">EnumeratedValues</span><span class="p">([</span><span class="s2">&quot;f&quot;</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">])),</span>
    <span class="p">],</span>
    <span class="n">ordered_categories</span><span class="o">=</span><span class="p">[</span><span class="n">lc</span><span class="o">.</span><span class="n">Category</span><span class="p">(</span><span class="s2">&quot;Failed&quot;</span><span class="p">),</span> <span class="n">lc</span><span class="o">.</span><span class="n">Category</span><span class="p">(</span><span class="s2">&quot;Passed&quot;</span><span class="p">),</span> <span class="n">lc</span><span class="o">.</span><span class="n">Category</span><span class="p">(</span><span class="s2">&quot;Congratulations&quot;</span><span class="p">)],</span>
<span class="p">)</span>

<span class="n">problem</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">classification-problem</span>
<span class="nt">format_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="nt">criteria</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Physics grade</span>
<span class="w">    </span><span class="nt">value_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span>
<span class="w">    </span><span class="nt">preference_direction</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">increasing</span>
<span class="w">    </span><span class="nt">min_value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">    </span><span class="nt">max_value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Literature grade</span>
<span class="w">    </span><span class="nt">value_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">enumerated</span>
<span class="w">    </span><span class="nt">ordered_values</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">f</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">e</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">d</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">c</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">b</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">a</span><span class="p p-Indicator">]</span>
<span class="nt">ordered_categories</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Failed</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Passed</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Congratulations</span>
</pre></div>
</div>
<p>You can access all their attributes in code as well:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">criterion</span> <span class="o">=</span> <span class="n">problem</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">criterion</span><span class="o">.</span><span class="n">name</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&#39;Physics grade&#39;
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">criterion</span><span class="o">.</span><span class="n">value_type</span><span class="p">,</span> <span class="n">criterion</span><span class="o">.</span><span class="n">is_real</span><span class="p">,</span> <span class="n">criterion</span><span class="o">.</span><span class="n">is_integer</span><span class="p">,</span> <span class="n">criterion</span><span class="o">.</span><span class="n">is_enumerated</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>(liblincs.ValueType.integer, False, True, False)
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">values</span> <span class="o">=</span> <span class="n">criterion</span><span class="o">.</span><span class="n">integer_values</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">values</span><span class="o">.</span><span class="n">preference_direction</span><span class="p">,</span> <span class="n">values</span><span class="o">.</span><span class="n">is_increasing</span><span class="p">,</span> <span class="n">values</span><span class="o">.</span><span class="n">is_decreasing</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>(liblincs.PreferenceDirection.isotone, True, False)
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">values</span><span class="o">.</span><span class="n">min_value</span><span class="p">,</span> <span class="n">values</span><span class="o">.</span><span class="n">max_value</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>(0, 100)
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">criterion</span> <span class="o">=</span> <span class="n">problem</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">criterion</span><span class="o">.</span><span class="n">name</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&#39;Literature grade&#39;
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">criterion</span><span class="o">.</span><span class="n">value_type</span><span class="p">,</span> <span class="n">criterion</span><span class="o">.</span><span class="n">is_real</span><span class="p">,</span> <span class="n">criterion</span><span class="o">.</span><span class="n">is_integer</span><span class="p">,</span> <span class="n">criterion</span><span class="o">.</span><span class="n">is_enumerated</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>(liblincs.ValueType.enumerated, False, False, True)
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">values</span> <span class="o">=</span> <span class="n">criterion</span><span class="o">.</span><span class="n">enumerated_values</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">list</span><span class="p">(</span><span class="n">values</span><span class="o">.</span><span class="n">ordered_values</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[&#39;f&#39;, &#39;e&#39;, &#39;d&#39;, &#39;c&#39;, &#39;b&#39;, &#39;a&#39;]
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">values</span><span class="o">.</span><span class="n">get_value_rank</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>5
</pre></div>
</div>
</section>
<section id="create-a-model">
<h4>Create a <code class="docutils literal notranslate"><span class="pre">Model</span></code><a class="headerlink" href="#create-a-model" title="Permalink to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">Model</span><span class="p">(</span>
    <span class="n">problem</span><span class="p">,</span>
    <span class="n">accepted_values</span><span class="o">=</span><span class="p">[</span>
        <span class="n">lc</span><span class="o">.</span><span class="n">AcceptedValues</span><span class="p">(</span><span class="n">lc</span><span class="o">.</span><span class="n">AcceptedValues</span><span class="o">.</span><span class="n">IntegerThresholds</span><span class="p">([</span><span class="mi">50</span><span class="p">,</span> <span class="mi">80</span><span class="p">])),</span>
        <span class="n">lc</span><span class="o">.</span><span class="n">AcceptedValues</span><span class="p">(</span><span class="n">lc</span><span class="o">.</span><span class="n">AcceptedValues</span><span class="o">.</span><span class="n">EnumeratedThresholds</span><span class="p">([</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">])),</span>
    <span class="p">],</span>
    <span class="n">sufficient_coalitions</span><span class="o">=</span><span class="p">[</span>
        <span class="n">lc</span><span class="o">.</span><span class="n">SufficientCoalitions</span><span class="p">(</span><span class="n">lc</span><span class="o">.</span><span class="n">SufficientCoalitions</span><span class="o">.</span><span class="n">Weights</span><span class="p">([</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">])),</span>
        <span class="n">lc</span><span class="o">.</span><span class="n">SufficientCoalitions</span><span class="p">(</span><span class="n">lc</span><span class="o">.</span><span class="n">SufficientCoalitions</span><span class="o">.</span><span class="n">Weights</span><span class="p">([</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">])),</span>
    <span class="p">],</span>
<span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ncs-classification-model</span>
<span class="nt">format_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="nt">accepted_values</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">thresholds</span>
<span class="w">    </span><span class="nt">thresholds</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">50</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">80</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">thresholds</span>
<span class="w">    </span><span class="nt">thresholds</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">c</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">a</span><span class="p p-Indicator">]</span>
<span class="nt">sufficient_coalitions</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nl">&amp;coalitions</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">weights</span>
<span class="w">    </span><span class="nt">criterion_weights</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0.5</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.5</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nv">*coalitions</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">accepted</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">accepted_values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">accepted</span><span class="o">.</span><span class="n">value_type</span><span class="p">,</span> <span class="n">accepted</span><span class="o">.</span><span class="n">is_real</span><span class="p">,</span> <span class="n">accepted</span><span class="o">.</span><span class="n">is_integer</span><span class="p">,</span> <span class="n">accepted</span><span class="o">.</span><span class="n">is_enumerated</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>(liblincs.ValueType.integer, False, True, False)
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">accepted</span><span class="o">.</span><span class="n">kind</span><span class="p">,</span> <span class="n">accepted</span><span class="o">.</span><span class="n">is_thresholds</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>(liblincs.Kind.thresholds, True)
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">list</span><span class="p">(</span><span class="n">accepted</span><span class="o">.</span><span class="n">integer_thresholds</span><span class="o">.</span><span class="n">thresholds</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[50, 80]
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">accepted</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">accepted_values</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">accepted</span><span class="o">.</span><span class="n">value_type</span><span class="p">,</span> <span class="n">accepted</span><span class="o">.</span><span class="n">is_real</span><span class="p">,</span> <span class="n">accepted</span><span class="o">.</span><span class="n">is_integer</span><span class="p">,</span> <span class="n">accepted</span><span class="o">.</span><span class="n">is_enumerated</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>(liblincs.ValueType.enumerated, False, False, True)
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">accepted</span><span class="o">.</span><span class="n">kind</span><span class="p">,</span> <span class="n">accepted</span><span class="o">.</span><span class="n">is_thresholds</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>(liblincs.Kind.thresholds, True)
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">list</span><span class="p">(</span><span class="n">accepted</span><span class="o">.</span><span class="n">enumerated_thresholds</span><span class="o">.</span><span class="n">thresholds</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[&#39;c&#39;, &#39;a&#39;]
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sufficient</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">sufficient_coalitions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sufficient</span><span class="o">.</span><span class="n">kind</span><span class="p">,</span> <span class="n">sufficient</span><span class="o">.</span><span class="n">is_weights</span><span class="p">,</span> <span class="n">sufficient</span><span class="o">.</span><span class="n">is_roots</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>(liblincs.Kind.weights, True, False)
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">list</span><span class="p">(</span><span class="n">sufficient</span><span class="o">.</span><span class="n">weights</span><span class="o">.</span><span class="n">criterion_weights</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[0.5, 0.5]
</pre></div>
</div>
</section>
<section id="create-classified-alternatives">
<h4>Create (classified) <code class="docutils literal notranslate"><span class="pre">Alternatives</span></code><a class="headerlink" href="#create-classified-alternatives" title="Permalink to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">alternatives</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">Alternatives</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="p">[</span>
    <span class="n">lc</span><span class="o">.</span><span class="n">Alternative</span><span class="p">(</span>
        <span class="s2">&quot;Unclassified alternative&quot;</span><span class="p">,</span>
        <span class="p">[</span>
            <span class="n">lc</span><span class="o">.</span><span class="n">Performance</span><span class="p">(</span><span class="n">lc</span><span class="o">.</span><span class="n">Performance</span><span class="o">.</span><span class="n">Integer</span><span class="p">(</span><span class="mi">50</span><span class="p">)),</span>
            <span class="n">lc</span><span class="o">.</span><span class="n">Performance</span><span class="p">(</span><span class="n">lc</span><span class="o">.</span><span class="n">Performance</span><span class="o">.</span><span class="n">Enumerated</span><span class="p">(</span><span class="s2">&quot;c&quot;</span><span class="p">)),</span>
        <span class="p">],</span>
        <span class="kc">None</span>
    <span class="p">),</span>
    <span class="n">lc</span><span class="o">.</span><span class="n">Alternative</span><span class="p">(</span>
        <span class="s2">&quot;Classified alternative&quot;</span><span class="p">,</span>
        <span class="p">[</span>
            <span class="n">lc</span><span class="o">.</span><span class="n">Performance</span><span class="p">(</span><span class="n">lc</span><span class="o">.</span><span class="n">Performance</span><span class="o">.</span><span class="n">Integer</span><span class="p">(</span><span class="mi">90</span><span class="p">)),</span>
            <span class="n">lc</span><span class="o">.</span><span class="n">Performance</span><span class="p">(</span><span class="n">lc</span><span class="o">.</span><span class="n">Performance</span><span class="o">.</span><span class="n">Enumerated</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)),</span>
        <span class="p">],</span>
        <span class="mi">2</span>
    <span class="p">),</span>
<span class="p">])</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">alternative</span> <span class="o">=</span> <span class="n">alternatives</span><span class="o">.</span><span class="n">alternatives</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">alternative</span><span class="o">.</span><span class="n">category_index</span> <span class="ow">is</span> <span class="kc">None</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">performance</span> <span class="o">=</span> <span class="n">alternative</span><span class="o">.</span><span class="n">profile</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">performance</span><span class="o">.</span><span class="n">value_type</span><span class="p">,</span> <span class="n">performance</span><span class="o">.</span><span class="n">is_real</span><span class="p">,</span> <span class="n">performance</span><span class="o">.</span><span class="n">is_integer</span><span class="p">,</span> <span class="n">performance</span><span class="o">.</span><span class="n">is_enumerated</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>(liblincs.ValueType.integer, False, True, False)
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">performance</span><span class="o">.</span><span class="n">integer</span><span class="o">.</span><span class="n">value</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>50
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="o">.</span><span class="n">ordered_categories</span><span class="p">[</span><span class="n">alternatives</span><span class="o">.</span><span class="n">alternatives</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">category_index</span><span class="p">]</span><span class="o">.</span><span class="n">name</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&#39;Congratulations&#39;
</pre></div>
</div>
</section>
</section>
<section id="clone-classification-objects">
<h3>Clone classification objects<a class="headerlink" href="#clone-classification-objects" title="Permalink to this heading">¶</a></h3>
<p>Just use <a class="reference external" href="https://docs.python.org/3/library/copy.html#copy.deepcopy"><code class="docutils literal notranslate"><span class="pre">copy.deepcopy</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">copy</span>

<span class="n">copied_problem</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">problem</span><span class="p">)</span>
<span class="n">copied_model</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
<span class="n">copied_alternatives</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">alternatives</span><span class="p">)</span>
</pre></div>
</div>
<p>This is especially useful <em>e.g.</em> if you want to identify alternatives that are classified differently by two models, because <code class="docutils literal notranslate"><span class="pre">lc.classify_alternatives</span></code> mutates the alternatives: clone the <code class="docutils literal notranslate"><span class="pre">Alternatives</span></code>, classify the copy and iterate over the <a class="reference external" href="https://docs.python.org/3/library/functions.html#zip"><code class="docutils literal notranslate"><span class="pre">zip</span></code></a> of both <code class="docutils literal notranslate"><span class="pre">Alternatives</span></code>, comparing their <code class="docutils literal notranslate"><span class="pre">.category_index</span></code>.</p>
</section>
<section id="serialize-classification-objects">
<h3>Serialize classification objects<a class="headerlink" href="#serialize-classification-objects" title="Permalink to this heading">¶</a></h3>
<section id="in-yaml-and-csv-like-the-command-line">
<h4>In YAML and CSV like the command-line<a class="headerlink" href="#in-yaml-and-csv-like-the-command-line" title="Permalink to this heading">¶</a></h4>
<p>(and the upcoming C++ API)</p>
<p>Classification objects have a <code class="docutils literal notranslate"><span class="pre">.dump</span></code> method, and their classes have a static <code class="docutils literal notranslate"><span class="pre">.load</span></code> method that accept file-like objects.</p>
<p>We’ve used them above to print classification objects to <code class="docutils literal notranslate"><span class="pre">sys.stdout</span></code>. Here is an example of how to use them with actual files:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;problem.yml&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">problem</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;model.yml&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">model</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;alternatives.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">alternatives</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;problem.yml&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">problem</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">Problem</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;model.yml&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;alternatives.csv&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">alternatives</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">Alternatives</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
<p>And here with in-memory <a class="reference external" href="https://docs.python.org/3/library/io.html">io</a> objects:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">()</span>
<span class="n">problem</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">classification-problem</span>
<span class="nt">format_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="nt">criteria</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Physics grade</span>
<span class="w">    </span><span class="nt">value_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span>
<span class="w">    </span><span class="nt">preference_direction</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">increasing</span>
<span class="w">    </span><span class="nt">min_value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">    </span><span class="nt">max_value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Literature grade</span>
<span class="w">    </span><span class="nt">value_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">enumerated</span>
<span class="w">    </span><span class="nt">ordered_values</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">f</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">e</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">d</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">c</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">b</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">a</span><span class="p p-Indicator">]</span>
<span class="nt">ordered_categories</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Failed</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Passed</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Congratulations</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="n">problem</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">Problem</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="using-the-python-specific-pickle-module">
<h4>Using the Python-specific <code class="docutils literal notranslate"><span class="pre">pickle</span></code> module<a class="headerlink" href="#using-the-python-specific-pickle-module" title="Permalink to this heading">¶</a></h4>
<p>Classification objects simply support <a class="reference external" href="https://docs.python.org/3/library/pickle.html">pickling</a> and unpickling. We recommend using the YAML and CSV formats whenever possible because they are not tied to the Python language (or the <em>lincs</em> library for that matter).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pickle</span>

<span class="n">pickle</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">pickle</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">problem</span><span class="p">))</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">classification-problem</span>
<span class="nt">format_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="nt">criteria</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Physics grade</span>
<span class="w">    </span><span class="nt">value_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span>
<span class="w">    </span><span class="nt">preference_direction</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">increasing</span>
<span class="w">    </span><span class="nt">min_value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">    </span><span class="nt">max_value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Literature grade</span>
<span class="w">    </span><span class="nt">value_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">enumerated</span>
<span class="w">    </span><span class="nt">ordered_values</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">f</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">e</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">d</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">c</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">b</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">a</span><span class="p p-Indicator">]</span>
<span class="nt">ordered_categories</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Failed</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Passed</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Congratulations</span>
</pre></div>
</div>
<p>Note however that learning objects (<em>e.g.</em> instances of <code class="docutils literal notranslate"><span class="pre">LearnMrsortByWeightsProfilesBreed</span></code>) are <em>not</em> picklable.</p>
</section>
</section>
<section id="customize-the-model-visualization">
<h3>Customize the model visualization<a class="headerlink" href="#customize-the-model-visualization" title="Permalink to this heading">¶</a></h3>
<p>We’ve decided to not implement any customization for the visualizations produced by <code class="docutils literal notranslate"><span class="pre">lincs.classification.visualize_model</span></code> (and thus <code class="docutils literal notranslate"><span class="pre">lincs</span> <span class="pre">visualize</span> <span class="pre">classification-model</span></code>) because this would make it less robust and increase its complexity beyond the scope of <em>lincs</em>.</p>
<p>However, <code class="docutils literal notranslate"><span class="pre">lincs.classification.visualize_model</span></code> is written in Python, using the Python API described in this guide. This means that you can get inspiration from its <a class="reference external" href="https://github.com/MICS-Lab/lincs/blob/main/lincs/visualization.py">source code</a> (<em>i.e.</em> copy-paste it) to produce custom visualizations for your needs.</p>
<p>Be aware that our implementation supports a few edge cases, so it might be a bit more complex than what you actually need:</p>
<ul class="simple">
<li><p>problems and models with a single criterion are visualized in a sensible way</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">Problem</span><span class="p">([</span><span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="p">(</span><span class="s2">&quot;Criterion&quot;</span><span class="p">,</span> <span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="o">.</span><span class="n">RealValues</span><span class="p">(</span><span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="o">.</span><span class="n">PreferenceDirection</span><span class="o">.</span><span class="n">increasing</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">))],</span> <span class="p">[</span><span class="n">lc</span><span class="o">.</span><span class="n">Category</span><span class="p">(</span><span class="s2">&quot;Bad&quot;</span><span class="p">),</span> <span class="n">lc</span><span class="o">.</span><span class="n">Category</span><span class="p">(</span><span class="s2">&quot;Good&quot;</span><span class="p">)])</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">generate_mrsort_model</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="mi">42</span><span class="p">)</span>
<span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">layout</span><span class="o">=</span><span class="s2">&quot;constrained&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">lc</span><span class="o">.</span><span class="n">visualize_model</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="p">[],</span> <span class="n">axes</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="png" src="_images/python-api_89_0.png" /></p>
<ul class="simple">
<li><p>all value types (real, integer and enumerated) are visualized on vertical axes</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">Problem</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="p">(</span><span class="s2">&quot;Real criterion&quot;</span><span class="p">,</span> <span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="o">.</span><span class="n">RealValues</span><span class="p">(</span><span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="o">.</span><span class="n">PreferenceDirection</span><span class="o">.</span><span class="n">increasing</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">)),</span>
        <span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="p">(</span><span class="s2">&quot;Integer criterion&quot;</span><span class="p">,</span> <span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="o">.</span><span class="n">IntegerValues</span><span class="p">(</span><span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="o">.</span><span class="n">PreferenceDirection</span><span class="o">.</span><span class="n">increasing</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">)),</span>
        <span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="p">(</span><span class="s2">&quot;Enumerated criterion&quot;</span><span class="p">,</span> <span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="o">.</span><span class="n">EnumeratedValues</span><span class="p">([</span><span class="s2">&quot;E&quot;</span><span class="p">,</span> <span class="s2">&quot;D&quot;</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;A&quot;</span><span class="p">])),</span>
    <span class="p">],</span>
    <span class="p">[</span><span class="n">lc</span><span class="o">.</span><span class="n">Category</span><span class="p">(</span><span class="s2">&quot;Bad&quot;</span><span class="p">),</span> <span class="n">lc</span><span class="o">.</span><span class="n">Category</span><span class="p">(</span><span class="s2">&quot;Good&quot;</span><span class="p">)]</span>
<span class="p">)</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">generate_mrsort_model</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="mi">43</span><span class="p">)</span>
<span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">layout</span><span class="o">=</span><span class="s2">&quot;constrained&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">lc</span><span class="o">.</span><span class="n">visualize_model</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="p">[],</span> <span class="n">axes</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="png" src="_images/python-api_91_0.png" /></p>
<ul class="simple">
<li><p>increasing and decreasing criteria are visualized with axes going up or down</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">Problem</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="p">(</span><span class="s2">&quot;Increasing criterion&quot;</span><span class="p">,</span> <span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="o">.</span><span class="n">RealValues</span><span class="p">(</span><span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="o">.</span><span class="n">PreferenceDirection</span><span class="o">.</span><span class="n">increasing</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">)),</span>
        <span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="p">(</span><span class="s2">&quot;Decreasing criterion&quot;</span><span class="p">,</span> <span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="o">.</span><span class="n">RealValues</span><span class="p">(</span><span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="o">.</span><span class="n">PreferenceDirection</span><span class="o">.</span><span class="n">decreasing</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">)),</span>
    <span class="p">],</span>
    <span class="p">[</span><span class="n">lc</span><span class="o">.</span><span class="n">Category</span><span class="p">(</span><span class="s2">&quot;Bad&quot;</span><span class="p">),</span> <span class="n">lc</span><span class="o">.</span><span class="n">Category</span><span class="p">(</span><span class="s2">&quot;Good&quot;</span><span class="p">)]</span>
<span class="p">)</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">generate_mrsort_model</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="mi">42</span><span class="p">)</span>
<span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">layout</span><span class="o">=</span><span class="s2">&quot;constrained&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">lc</span><span class="o">.</span><span class="n">visualize_model</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="p">[],</span> <span class="n">axes</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="png" src="_images/python-api_93_0.png" /></p>
<ul class="simple">
<li><p>any min and max values are aligned horizontally at the top and bottom of vertical axes</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">Problem</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="o">.</span><span class="n">RealValues</span><span class="p">(</span><span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="o">.</span><span class="n">PreferenceDirection</span><span class="o">.</span><span class="n">increasing</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)),</span>
        <span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="p">(</span><span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="o">.</span><span class="n">RealValues</span><span class="p">(</span><span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="o">.</span><span class="n">PreferenceDirection</span><span class="o">.</span><span class="n">increasing</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)),</span>
    <span class="p">],</span>
    <span class="p">[</span><span class="n">lc</span><span class="o">.</span><span class="n">Category</span><span class="p">(</span><span class="s2">&quot;Bad&quot;</span><span class="p">),</span> <span class="n">lc</span><span class="o">.</span><span class="n">Category</span><span class="p">(</span><span class="s2">&quot;Good&quot;</span><span class="p">)]</span>
<span class="p">)</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">generate_mrsort_model</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="mi">44</span><span class="p">)</span>
<span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">layout</span><span class="o">=</span><span class="s2">&quot;constrained&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">lc</span><span class="o">.</span><span class="n">visualize_model</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="p">[],</span> <span class="n">axes</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="png" src="_images/python-api_95_0.png" /></p>
<ul class="simple">
<li><p>labels for integer criteria with any number of intervals</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">Problem</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="p">(</span><span class="s2">&quot;1 interval&quot;</span><span class="p">,</span> <span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="o">.</span><span class="n">IntegerValues</span><span class="p">(</span><span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="o">.</span><span class="n">PreferenceDirection</span><span class="o">.</span><span class="n">increasing</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)),</span>
        <span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="p">(</span><span class="s2">&quot;2 intervals&quot;</span><span class="p">,</span> <span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="o">.</span><span class="n">IntegerValues</span><span class="p">(</span><span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="o">.</span><span class="n">PreferenceDirection</span><span class="o">.</span><span class="n">increasing</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">12</span><span class="p">)),</span>
        <span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="p">(</span><span class="s2">&quot;3 intervals&quot;</span><span class="p">,</span> <span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="o">.</span><span class="n">IntegerValues</span><span class="p">(</span><span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="o">.</span><span class="n">PreferenceDirection</span><span class="o">.</span><span class="n">increasing</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">7</span><span class="p">)),</span>
        <span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="p">(</span><span class="s2">&quot;Even number</span><span class="se">\n</span><span class="s2">of intervals&quot;</span><span class="p">,</span> <span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="o">.</span><span class="n">IntegerValues</span><span class="p">(</span><span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="o">.</span><span class="n">PreferenceDirection</span><span class="o">.</span><span class="n">increasing</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">)),</span>
        <span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="p">(</span><span class="s2">&quot;Odd number</span><span class="se">\n</span><span class="s2">of intervals&quot;</span><span class="p">,</span> <span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="o">.</span><span class="n">IntegerValues</span><span class="p">(</span><span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="o">.</span><span class="n">PreferenceDirection</span><span class="o">.</span><span class="n">increasing</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">1201</span><span class="p">)),</span>
    <span class="p">],</span>
    <span class="p">[</span><span class="n">lc</span><span class="o">.</span><span class="n">Category</span><span class="p">(</span><span class="s2">&quot;Bad&quot;</span><span class="p">),</span> <span class="n">lc</span><span class="o">.</span><span class="n">Category</span><span class="p">(</span><span class="s2">&quot;Good&quot;</span><span class="p">)]</span>
<span class="p">)</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">generate_mrsort_model</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="mi">43</span><span class="p">)</span>
<span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">layout</span><span class="o">=</span><span class="s2">&quot;constrained&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">lc</span><span class="o">.</span><span class="n">visualize_model</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="p">[],</span> <span class="n">axes</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="png" src="_images/python-api_97_0.png" /></p>
</section>
<section id="create-your-own-learning-strategies">
<h3>Create your own learning strategies<a class="headerlink" href="#create-your-own-learning-strategies" title="Permalink to this heading">¶</a></h3>
<p>The “Weights, profiles, breed” learning approach uses strategies for each of its steps. <em>lincs</em> provides effective strategies as you’ve seen in the first part of this guide. You can also define your own strategies, to experiment with new ways to learn.</p>
<p>Let’s create a problem and learning set for this section:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">Problem</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="p">(</span><span class="s2">&quot;Criterion 1&quot;</span><span class="p">,</span> <span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="o">.</span><span class="n">RealValues</span><span class="p">(</span><span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="o">.</span><span class="n">PreferenceDirection</span><span class="o">.</span><span class="n">decreasing</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)),</span>
        <span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="p">(</span><span class="s2">&quot;Criterion 2&quot;</span><span class="p">,</span> <span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="o">.</span><span class="n">IntegerValues</span><span class="p">(</span><span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="o">.</span><span class="n">PreferenceDirection</span><span class="o">.</span><span class="n">increasing</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">)),</span>
        <span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="p">(</span><span class="s2">&quot;Criterion 3&quot;</span><span class="p">,</span> <span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="o">.</span><span class="n">EnumeratedValues</span><span class="p">([</span><span class="s2">&quot;F&quot;</span><span class="p">,</span> <span class="s2">&quot;E&quot;</span><span class="p">,</span> <span class="s2">&quot;D&quot;</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;A&quot;</span><span class="p">])),</span>
    <span class="p">],</span>
    <span class="p">[</span><span class="n">lc</span><span class="o">.</span><span class="n">Category</span><span class="p">(</span><span class="s2">&quot;Bad&quot;</span><span class="p">),</span> <span class="n">lc</span><span class="o">.</span><span class="n">Category</span><span class="p">(</span><span class="s2">&quot;Medium&quot;</span><span class="p">),</span> <span class="n">lc</span><span class="o">.</span><span class="n">Category</span><span class="p">(</span><span class="s2">&quot;Good&quot;</span><span class="p">)],</span>
<span class="p">)</span>
<span class="n">learning_set</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">generate_alternatives</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">lc</span><span class="o">.</span><span class="n">generate_mrsort_model</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">random_seed</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span> <span class="n">alternatives_count</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">random_seed</span><span class="o">=</span><span class="mi">43</span><span class="p">)</span>
</pre></div>
</div>
<section id="learningdata">
<h4><code class="docutils literal notranslate"><span class="pre">LearningData</span></code><a class="headerlink" href="#learningdata" title="Permalink to this heading">¶</a></h4>
<p>First, let’s get more familiar with the <code class="docutils literal notranslate"><span class="pre">LearningData</span></code>. You’ve seen it briefly in the first part of this guide but its purpose might still be quite obscure at this point.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">learning_data</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">LearnMrsortByWeightsProfilesBreed</span><span class="o">.</span><span class="n">LearningData</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">learning_set</span><span class="p">,</span> <span class="n">models_count</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">random_seed</span><span class="o">=</span><span class="mi">43</span><span class="p">)</span>
</pre></div>
</div>
<p>This object is shared by all strategies. They communicate by changing it, using side effects. It’s the state of the WPB algorithm. It contains two families of attributes.</p>
<section id="input-data">
<h5>Input data<a class="headerlink" href="#input-data" title="Permalink to this heading">¶</a></h5>
<p>The first family of attributes is about the problem and learning set. These attributes never change. First, the counts:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">learning_data</span><span class="o">.</span><span class="n">criteria_count</span><span class="p">,</span> <span class="n">learning_data</span><span class="o">.</span><span class="n">categories_count</span><span class="p">,</span> <span class="n">learning_data</span><span class="o">.</span><span class="n">boundaries_count</span><span class="p">,</span> <span class="n">learning_data</span><span class="o">.</span><span class="n">alternatives_count</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>(3, 3, 2, 1000)
</pre></div>
</div>
<p>The learning set is pre-processed in the <code class="docutils literal notranslate"><span class="pre">LearningData</span></code> so that the WPB algorithm doesn’t have to manipulate the different type of criterion values. In the <code class="docutils literal notranslate"><span class="pre">LearningData</span></code>, we keep only the ranks of the performances of each alternative in the learning set. The learning set is also destructured into a few arrays. Here are the attributes that describe this pre-processed learning set:</p>
<p>The number of distinct values actually seen for each criterion (including the min and max values for numerical criteria):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">list</span><span class="p">(</span><span class="n">learning_data</span><span class="o">.</span><span class="n">values_counts</span><span class="p">)</span>  <span class="c1"># Indexed by [criterion_index]</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[1002, 101, 6]
</pre></div>
</div>
<p>We see that the learning data knows 1002 values for the real-valued criterion. This is usual as it’s rare for two floating point values to be exactly equal, so the 1000 alternatives have distinct values, and the min and max are two more values. The learning data contains 101 values for the integer-valued criterion, meaning that the alternatives in the learning set do actually cover the whole set of possible values. And similarly, 6 values for the enumerated criterion.</p>
<p>For each criterion, the ranks of the performance of each alternative:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="n">v</span><span class="p">)[:</span><span class="mi">10</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;...&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">learning_data</span><span class="o">.</span><span class="n">performance_ranks</span><span class="p">]</span>  <span class="c1"># Indexed by [criterion_index][alternative_index]</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[[883, 900, 753, 216, 365, 410, 302, 852, 738, 45, &#39;...&#39;],
 [50, 13, 17, 86, 4, 2, 25, 81, 47, 87, &#39;...&#39;],
 [3, 0, 1, 0, 3, 3, 2, 0, 0, 3, &#39;...&#39;]]
</pre></div>
</div>
<p>The assignment of each alternative, <em>i.e.</em> the index of its category:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">list</span><span class="p">(</span><span class="n">learning_data</span><span class="o">.</span><span class="n">assignments</span><span class="p">)[:</span><span class="mi">10</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;...&#39;</span><span class="p">]</span>  <span class="c1"># Indexed by [alternative_index]</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[2, 2, 2, 0, 1, 1, 1, 2, 2, 0, &#39;...&#39;]
</pre></div>
</div>
<p>All these attributes are iterable and allow random access through an integer index. They do not support splicing.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">learning_data</span><span class="o">.</span><span class="n">assignments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>2
</pre></div>
</div>
</section>
<section id="in-progress-data">
<h5>In-progress data<a class="headerlink" href="#in-progress-data" title="Permalink to this heading">¶</a></h5>
<p>The second family of attributes is about the WPB algorithm itself.</p>
<p>The WPB approach operates on several “in progress” models. Their number is constant:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">learning_data</span><span class="o">.</span><span class="n">models_count</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>9
</pre></div>
</div>
<p>Each model comes with a uniform random bits generator (URBG for short):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">urbg</span><span class="p">)[:</span><span class="mi">43</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;&gt;&#39;</span> <span class="k">for</span> <span class="n">urbg</span> <span class="ow">in</span> <span class="n">learning_data</span><span class="o">.</span><span class="n">urbgs</span><span class="p">]</span>  <span class="c1"># Indexed by [model_index]</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[&#39;&lt;liblincs.UniformRandomBitsGenerator object&gt;&#39;,
 &#39;&lt;liblincs.UniformRandomBitsGenerator object&gt;&#39;,
 &#39;&lt;liblincs.UniformRandomBitsGenerator object&gt;&#39;,
 &#39;&lt;liblincs.UniformRandomBitsGenerator object&gt;&#39;,
 &#39;&lt;liblincs.UniformRandomBitsGenerator object&gt;&#39;,
 &#39;&lt;liblincs.UniformRandomBitsGenerator object&gt;&#39;,
 &#39;&lt;liblincs.UniformRandomBitsGenerator object&gt;&#39;,
 &#39;&lt;liblincs.UniformRandomBitsGenerator object&gt;&#39;,
 &#39;&lt;liblincs.UniformRandomBitsGenerator object&gt;&#39;]
</pre></div>
</div>
<p>This lets heuristic strategies operate in parallel on models and still produce deterministic results. URBGs are callable to get the next pseudo-random integer:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">r</span><span class="p">()</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">learning_data</span><span class="o">.</span><span class="n">urbgs</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[494155588,
 870190228,
 2450414687,
 641676058,
 661088198,
 363471047,
 1448606581,
 1348129397,
 2542538607]
</pre></div>
</div>
<p>The WPB learning approach is iterative, and the <code class="docutils literal notranslate"><span class="pre">iteration_index</span></code> is stored in the learning data. It starts at zero and tells you the current iteration:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">learning_data</span><span class="o">.</span><span class="n">iteration_index</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>0
</pre></div>
</div>
<p>The remaining attributes are modified at each iteration, and start uninitialized. For this presentation, we’ll first run one iteration of WPB so that their values make sense.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">learning_data</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">LearnMrsortByWeightsProfilesBreed</span><span class="o">.</span><span class="n">LearningData</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">learning_set</span><span class="p">,</span> <span class="n">models_count</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">random_seed</span><span class="o">=</span><span class="mi">43</span><span class="p">)</span>
<span class="n">profiles_initialization_strategy</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">InitializeProfilesForProbabilisticMaximalDiscriminationPowerPerCriterion</span><span class="p">(</span><span class="n">learning_data</span><span class="p">)</span>
<span class="n">weights_optimization_strategy</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">OptimizeWeightsUsingGlop</span><span class="p">(</span><span class="n">learning_data</span><span class="p">)</span>
<span class="n">profiles_improvement_strategy</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">ImproveProfilesWithAccuracyHeuristicOnCpu</span><span class="p">(</span><span class="n">learning_data</span><span class="p">)</span>
<span class="n">breeding_strategy</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">ReinitializeLeastAccurate</span><span class="p">(</span><span class="n">learning_data</span><span class="p">,</span> <span class="n">profiles_initialization_strategy</span><span class="o">=</span><span class="n">profiles_initialization_strategy</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="n">termination_strategy</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">TerminateAfterIterations</span><span class="p">(</span><span class="n">learning_data</span><span class="p">,</span> <span class="n">max_iterations_count</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="n">lc</span><span class="o">.</span><span class="n">LearnMrsortByWeightsProfilesBreed</span><span class="p">(</span>
    <span class="n">learning_data</span><span class="p">,</span>
    <span class="n">profiles_initialization_strategy</span><span class="p">,</span>
    <span class="n">weights_optimization_strategy</span><span class="p">,</span>
    <span class="n">profiles_improvement_strategy</span><span class="p">,</span>
    <span class="n">breeding_strategy</span><span class="p">,</span>
    <span class="n">termination_strategy</span><span class="p">,</span>
<span class="p">)</span><span class="o">.</span><span class="n">perform</span><span class="p">()</span>

<span class="k">assert</span><span class="p">(</span><span class="n">learning_data</span><span class="o">.</span><span class="n">iteration_index</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>Its <code class="docutils literal notranslate"><span class="pre">model_indexes</span></code> contains indexes of models in increasing order of accuracy.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">list</span><span class="p">(</span><span class="n">learning_data</span><span class="o">.</span><span class="n">model_indexes</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[1, 5, 4, 8, 3, 6, 2, 0, 7]
</pre></div>
</div>
<p>Its <code class="docutils literal notranslate"><span class="pre">accuracies</span></code> attribute holds the accuracy of each model. They are stored as the count of correctly-classified alternatives, between 0 and <code class="docutils literal notranslate"><span class="pre">alternatives_count</span></code> included:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">list</span><span class="p">(</span><span class="n">learning_data</span><span class="o">.</span><span class="n">accuracies</span><span class="p">)</span>  <span class="c1"># Indexed by model_index</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[728, 593, 725, 671, 637, 609, 676, 833, 640]
</pre></div>
</div>
<p>If you iterate the <code class="docutils literal notranslate"><span class="pre">accuracies</span></code> in the order of <code class="docutils literal notranslate"><span class="pre">model_indexes</span></code>, they are sorted:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">learning_data</span><span class="o">.</span><span class="n">accuracies</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="n">learning_data</span><span class="o">.</span><span class="n">model_indexes</span><span class="p">]</span> <span class="o">==</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">learning_data</span><span class="o">.</span><span class="n">accuracies</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
<p>Its <code class="docutils literal notranslate"><span class="pre">profile_ranks</span></code> hold, for each in-progress model, boundary, and criterion, the rank of the boundary’s performance, on the same scale as the <code class="docutils literal notranslate"><span class="pre">performance_ranks</span></code> attributes.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="nb">list</span><span class="p">(</span><span class="n">vv</span><span class="p">)</span> <span class="k">for</span> <span class="n">vv</span> <span class="ow">in</span> <span class="n">v</span><span class="p">]</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">learning_data</span><span class="o">.</span><span class="n">profile_ranks</span><span class="p">]</span>  <span class="c1"># Indexed by [model_index][boundary_index][criterion_index]</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[[[124, 9, 0], [633, 9, 3]],
 [[492, 8, 1], [965, 8, 4]],
 [[268, 15, 0], [506, 54, 3]],
 [[230, 8, 1], [272, 26, 4]],
 [[201, 1, 1], [201, 2, 3]],
 [[86, 64, 0], [86, 99, 0]],
 [[223, 60, 2], [310, 80, 5]],
 [[235, 20, 2], [595, 20, 3]],
 [[261, 52, 0], [262, 52, 3]]]
</pre></div>
</div>
<p>Its <code class="docutils literal notranslate"><span class="pre">weights</span></code> attribute holds the MR-Sort weight of each criterion in each in-progress model.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">learning_data</span><span class="o">.</span><span class="n">weights</span><span class="p">]</span>  <span class="c1"># Indexed by [model_index][criterion_index]</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[[1.0132789611816406e-06, 0.9999989867210388, 1.0132789611816406e-06],
 [0.9999989867210388, 0.9999989867210388, 1.0132789611816406e-06],
 [1.0, 0.0, 0.9999989867210388],
 [0.5000004768371582, 0.4999994933605194, 0.4999994933605194],
 [1.0132789611816406e-06, 0.9999989867210388, 0.0],
 [0.9999989867210388, 0.0, 1.0132789611816406e-06],
 [1.0, 0.0, 0.0],
 [1.0, 0.9999989867210388, 1.0132789611816406e-06],
 [0.9999989867210388, 0.0, 0.9999989867210388]]
</pre></div>
</div>
<p>Finally, <code class="docutils literal notranslate"><span class="pre">LearningData</span></code> has two methods about the best model so far: <code class="docutils literal notranslate"><span class="pre">get_best_model</span></code> and <code class="docutils literal notranslate"><span class="pre">get_best_accuracy</span></code>, which respectively return the best <code class="docutils literal notranslate"><span class="pre">Model</span></code> so far and its accuracy.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">learning_data</span><span class="o">.</span><span class="n">get_best_model</span><span class="p">()</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ncs-classification-model</span>
<span class="nt">format_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="nt">accepted_values</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">thresholds</span>
<span class="w">    </span><span class="nt">thresholds</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">7.7909708</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">4.06594753</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">thresholds</span>
<span class="w">    </span><span class="nt">thresholds</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">20</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">20</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">thresholds</span>
<span class="w">    </span><span class="nt">thresholds</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">D</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">C</span><span class="p p-Indicator">]</span>
<span class="nt">sufficient_coalitions</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nl">&amp;coalitions</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">weights</span>
<span class="w">    </span><span class="nt">criterion_weights</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">1</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.999998987</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1.01327896e-06</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nv">*coalitions</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">learning_data</span><span class="o">.</span><span class="n">get_best_accuracy</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>833
</pre></div>
</div>
</section>
</section>
<section id="observer-strategies">
<h4><code class="docutils literal notranslate"><span class="pre">Observer</span></code> strategies<a class="headerlink" href="#observer-strategies" title="Permalink to this heading">¶</a></h4>
<p>With this hopefully better understanding of <code class="docutils literal notranslate"><span class="pre">LearningData</span></code>, let’s write our own <code class="docutils literal notranslate"><span class="pre">Observer</span></code> strategy.
It’s arguably the simplest to starts with, because it’s not expected to <em>change</em> the <code class="docutils literal notranslate"><span class="pre">LearningData</span></code>, but only <em>observe</em> it at some key points of the learning.</p>
<p>To start as simple as possible, lets reproduce the behavior of the <code class="docutils literal notranslate"><span class="pre">--...-verbose</span></code> flag on the command line, by creating an observer that just prints the best accuracy at each step.</p>
<p><code class="docutils literal notranslate"><span class="pre">Observer</span></code> strategies must define two methods to be called by the learning algorithm: <code class="docutils literal notranslate"><span class="pre">after_iteration</span></code>, to be called at the end of each iteration, after the breeding of models is done, and <code class="docutils literal notranslate"><span class="pre">before_return</span></code>, to be called just before the final model is returned.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">VerboseObserver</span><span class="p">(</span><span class="n">lc</span><span class="o">.</span><span class="n">LearnMrsortByWeightsProfilesBreed</span><span class="o">.</span><span class="n">Observer</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">learning_data</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">learning_data</span> <span class="o">=</span> <span class="n">learning_data</span>

    <span class="k">def</span> <span class="nf">after_iteration</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Best accuracy (after </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">learning_data</span><span class="o">.</span><span class="n">iteration_index</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">}</span><span class="s2"> iterations): </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">learning_data</span><span class="o">.</span><span class="n">get_best_accuracy</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">before_return</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Final accuracy (after </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">learning_data</span><span class="o">.</span><span class="n">iteration_index</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">}</span><span class="s2"> iterations): </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">learning_data</span><span class="o">.</span><span class="n">get_best_accuracy</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>We can now pass it to a learning and perform that learning to observe its effects:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">profiles_initialization_strategy</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">InitializeProfilesForProbabilisticMaximalDiscriminationPowerPerCriterion</span><span class="p">(</span><span class="n">learning_data</span><span class="p">)</span>
<span class="n">weights_optimization_strategy</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">OptimizeWeightsUsingGlop</span><span class="p">(</span><span class="n">learning_data</span><span class="p">)</span>
<span class="n">profiles_improvement_strategy</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">ImproveProfilesWithAccuracyHeuristicOnCpu</span><span class="p">(</span><span class="n">learning_data</span><span class="p">)</span>
<span class="n">breeding_strategy</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">ReinitializeLeastAccurate</span><span class="p">(</span><span class="n">learning_data</span><span class="p">,</span> <span class="n">profiles_initialization_strategy</span><span class="o">=</span><span class="n">profiles_initialization_strategy</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="n">termination_strategy</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">TerminateAtAccuracy</span><span class="p">(</span><span class="n">learning_data</span><span class="p">,</span> <span class="n">target_accuracy</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">learning_set</span><span class="o">.</span><span class="n">alternatives</span><span class="p">))</span>
<span class="n">observer</span> <span class="o">=</span> <span class="n">VerboseObserver</span><span class="p">(</span><span class="n">learning_data</span><span class="p">)</span>

<span class="n">learned_model</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">LearnMrsortByWeightsProfilesBreed</span><span class="p">(</span>
    <span class="n">learning_data</span><span class="p">,</span>
    <span class="n">profiles_initialization_strategy</span><span class="p">,</span>
    <span class="n">weights_optimization_strategy</span><span class="p">,</span>
    <span class="n">profiles_improvement_strategy</span><span class="p">,</span>
    <span class="n">breeding_strategy</span><span class="p">,</span>
    <span class="n">termination_strategy</span><span class="p">,</span>
    <span class="p">[</span><span class="n">observer</span><span class="p">],</span>
<span class="p">)</span><span class="o">.</span><span class="n">perform</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Best accuracy (after 1 iterations): 938
Best accuracy (after 2 iterations): 992
Best accuracy (after 3 iterations): 997
Best accuracy (after 4 iterations): 997
Best accuracy (after 5 iterations): 997
Best accuracy (after 6 iterations): 997
Best accuracy (after 7 iterations): 997
Best accuracy (after 8 iterations): 999
Final accuracy (after 9 iterations): 1000
</pre></div>
</div>
<p>Now let’s do something slightly more complicated: our goal for <code class="docutils literal notranslate"><span class="pre">IntermediatesObserver</span></code> is to keep track of the best model so far at different times during the learning. Specifically, we want to keep the models at iterations 1, 2, 4, 8, <em>etc.</em>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">math</span>

<span class="k">class</span> <span class="nc">IntermediatesObserver</span><span class="p">(</span><span class="n">lc</span><span class="o">.</span><span class="n">LearnMrsortByWeightsProfilesBreed</span><span class="o">.</span><span class="n">Observer</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">problem</span><span class="p">,</span> <span class="n">learning_data</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">problem</span> <span class="o">=</span> <span class="n">problem</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">learning_data</span> <span class="o">=</span> <span class="n">learning_data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">intermediate_models</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">after_iteration</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">math</span><span class="o">.</span><span class="n">log2</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">learning_data</span><span class="o">.</span><span class="n">iteration_index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">is_integer</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">intermediate_models</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">learning_data</span><span class="o">.</span><span class="n">get_best_model</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">before_return</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

<span class="n">learning_data</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">LearnMrsortByWeightsProfilesBreed</span><span class="o">.</span><span class="n">LearningData</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">learning_set</span><span class="p">,</span> <span class="n">models_count</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">random_seed</span><span class="o">=</span><span class="mi">43</span><span class="p">)</span>  <span class="c1"># Do *not* reuse the same `LearningData` for several learnings</span>
<span class="n">profiles_initialization_strategy</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">InitializeProfilesForProbabilisticMaximalDiscriminationPowerPerCriterion</span><span class="p">(</span><span class="n">learning_data</span><span class="p">)</span>
<span class="n">weights_optimization_strategy</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">OptimizeWeightsUsingGlop</span><span class="p">(</span><span class="n">learning_data</span><span class="p">)</span>
<span class="n">profiles_improvement_strategy</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">ImproveProfilesWithAccuracyHeuristicOnCpu</span><span class="p">(</span><span class="n">learning_data</span><span class="p">)</span>
<span class="n">breeding_strategy</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">ReinitializeLeastAccurate</span><span class="p">(</span><span class="n">learning_data</span><span class="p">,</span> <span class="n">profiles_initialization_strategy</span><span class="o">=</span><span class="n">profiles_initialization_strategy</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="n">termination_strategy</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">TerminateAtAccuracy</span><span class="p">(</span><span class="n">learning_data</span><span class="p">,</span> <span class="n">target_accuracy</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">learning_set</span><span class="o">.</span><span class="n">alternatives</span><span class="p">))</span>
<span class="n">observer</span> <span class="o">=</span> <span class="n">IntermediatesObserver</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">learning_data</span><span class="p">)</span>

<span class="n">final_model</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">LearnMrsortByWeightsProfilesBreed</span><span class="p">(</span>
    <span class="n">learning_data</span><span class="p">,</span>
    <span class="n">profiles_initialization_strategy</span><span class="p">,</span>
    <span class="n">weights_optimization_strategy</span><span class="p">,</span>
    <span class="n">profiles_improvement_strategy</span><span class="p">,</span>
    <span class="n">breeding_strategy</span><span class="p">,</span>
    <span class="n">termination_strategy</span><span class="p">,</span>
    <span class="p">[</span><span class="n">observer</span><span class="p">],</span>
<span class="p">)</span><span class="o">.</span><span class="n">perform</span><span class="p">()</span>

<span class="k">for</span> <span class="n">model</span> <span class="ow">in</span> <span class="n">observer</span><span class="o">.</span><span class="n">intermediate_models</span><span class="p">:</span>
    <span class="n">model</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
<span class="n">final_model</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ncs-classification-model</span>
<span class="nt">format_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="nt">accepted_values</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">thresholds</span>
<span class="w">    </span><span class="nt">thresholds</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">7.7909708</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">4.06594753</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">thresholds</span>
<span class="w">    </span><span class="nt">thresholds</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">20</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">20</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">thresholds</span>
<span class="w">    </span><span class="nt">thresholds</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">D</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">C</span><span class="p p-Indicator">]</span>
<span class="nt">sufficient_coalitions</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nl">&amp;coalitions</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">weights</span>
<span class="w">    </span><span class="nt">criterion_weights</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">1</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.999998987</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1.01327896e-06</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nv">*coalitions</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ncs-classification-model</span>
<span class="nt">format_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="nt">accepted_values</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">thresholds</span>
<span class="w">    </span><span class="nt">thresholds</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">7.95116329</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">3.89878368</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">thresholds</span>
<span class="w">    </span><span class="nt">thresholds</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">21</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">thresholds</span>
<span class="w">    </span><span class="nt">thresholds</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">C</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">B</span><span class="p p-Indicator">]</span>
<span class="nt">sufficient_coalitions</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nl">&amp;coalitions</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">weights</span>
<span class="w">    </span><span class="nt">criterion_weights</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">1</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nv">*coalitions</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ncs-classification-model</span>
<span class="nt">format_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="nt">accepted_values</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">thresholds</span>
<span class="w">    </span><span class="nt">thresholds</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">7.96338844</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">3.82566905</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">thresholds</span>
<span class="w">    </span><span class="nt">thresholds</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">73</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">84</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">thresholds</span>
<span class="w">    </span><span class="nt">thresholds</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">B</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">B</span><span class="p p-Indicator">]</span>
<span class="nt">sufficient_coalitions</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nl">&amp;coalitions</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">weights</span>
<span class="w">    </span><span class="nt">criterion_weights</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">1</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nv">*coalitions</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ncs-classification-model</span>
<span class="nt">format_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="nt">accepted_values</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">thresholds</span>
<span class="w">    </span><span class="nt">thresholds</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">7.96338844</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">3.74707603</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">thresholds</span>
<span class="w">    </span><span class="nt">thresholds</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">94</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">99</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">thresholds</span>
<span class="w">    </span><span class="nt">thresholds</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">B</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">B</span><span class="p p-Indicator">]</span>
<span class="nt">sufficient_coalitions</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nl">&amp;coalitions</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">weights</span>
<span class="w">    </span><span class="nt">criterion_weights</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">1</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nv">*coalitions</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ncs-classification-model</span>
<span class="nt">format_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="nt">accepted_values</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">thresholds</span>
<span class="w">    </span><span class="nt">thresholds</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">7.95116329</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">3.74707603</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">thresholds</span>
<span class="w">    </span><span class="nt">thresholds</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">94</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">99</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">thresholds</span>
<span class="w">    </span><span class="nt">thresholds</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">B</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">B</span><span class="p p-Indicator">]</span>
<span class="nt">sufficient_coalitions</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nl">&amp;coalitions</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">weights</span>
<span class="w">    </span><span class="nt">criterion_weights</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">1</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nv">*coalitions</span>
</pre></div>
</div>
</section>
<section id="other-strategies">
<h4>Other strategies<a class="headerlink" href="#other-strategies" title="Permalink to this heading">¶</a></h4>
<p>Coming up with new interesting strategies is far from easy, so in this guide, we’ll just describe the interfaces that the WPB approach expects from these strategies, and not even <em>try</em> to do anything intelligent. That part is up to you!</p>
<p>Each strategy must inherit from a given abstract base class, as you can see below. Each strategy must override a given method as is detailed below.</p>
<p>Profiles initialization strategies must implement <code class="docutils literal notranslate"><span class="pre">.initialize_profiles(model_indexes_begin,</span> <span class="pre">model_indexes_end)</span></code>, that should initialize all <code class="docutils literal notranslate"><span class="pre">profile_ranks</span></code> for models at indexes in <code class="docutils literal notranslate"><span class="pre">[learning_data.model_index[i]</span> <span class="pre">for</span> <span class="pre">i</span> <span class="pre">in</span> <span class="pre">range(model_indexes_begin,</span> <span class="pre">model_indexes_end)]</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">SillyProfilesInitializationStrategy</span><span class="p">(</span><span class="n">lc</span><span class="o">.</span><span class="n">LearnMrsortByWeightsProfilesBreed</span><span class="o">.</span><span class="n">ProfilesInitializationStrategy</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">learning_data</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">learning_data</span> <span class="o">=</span> <span class="n">learning_data</span>

    <span class="k">def</span> <span class="nf">initialize_profiles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_indexes_begin</span><span class="p">,</span> <span class="n">model_indexes_end</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;initialize_profiles&quot;</span><span class="p">,</span> <span class="n">model_indexes_begin</span><span class="p">,</span> <span class="n">model_indexes_end</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">model_index_index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">model_indexes_begin</span><span class="p">,</span> <span class="n">model_indexes_end</span><span class="p">):</span>
            <span class="n">model_index</span> <span class="o">=</span> <span class="n">learning_data</span><span class="o">.</span><span class="n">model_indexes</span><span class="p">[</span><span class="n">model_index_index</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">boundary_index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">learning_data</span><span class="o">.</span><span class="n">boundaries_count</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">criterion_index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">learning_data</span><span class="o">.</span><span class="n">criteria_count</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">learning_data</span><span class="o">.</span><span class="n">profile_ranks</span><span class="p">[</span><span class="n">model_index</span><span class="p">][</span><span class="n">boundary_index</span><span class="p">][</span><span class="n">criterion_index</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
</pre></div>
</div>
<p>Weights optimization strategies must implement <code class="docutils literal notranslate"><span class="pre">.optimize_weights(model_indexes_begin,</span> <span class="pre">model_indexes_end)</span></code>, that should optimize all <code class="docutils literal notranslate"><span class="pre">weights</span></code> for models at indexes in <code class="docutils literal notranslate"><span class="pre">[learning_data.model_index[i]</span> <span class="pre">for</span> <span class="pre">i</span> <span class="pre">in</span> <span class="pre">range(model_indexes_begin,</span> <span class="pre">model_indexes_end)]</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">SillyWeightsOptimizationStrategy</span><span class="p">(</span><span class="n">lc</span><span class="o">.</span><span class="n">LearnMrsortByWeightsProfilesBreed</span><span class="o">.</span><span class="n">WeightsOptimizationStrategy</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">learning_data</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">learning_data</span> <span class="o">=</span> <span class="n">learning_data</span>

    <span class="k">def</span> <span class="nf">optimize_weights</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_indexes_begin</span><span class="p">,</span> <span class="n">model_indexes_end</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;optimize_weights&quot;</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">model_index_index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">model_indexes_begin</span><span class="p">,</span> <span class="n">model_indexes_end</span><span class="p">):</span>
            <span class="n">model_index</span> <span class="o">=</span> <span class="n">learning_data</span><span class="o">.</span><span class="n">model_indexes</span><span class="p">[</span><span class="n">model_index_index</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">criterion_index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">learning_data</span><span class="o">.</span><span class="n">criteria_count</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">learning_data</span><span class="o">.</span><span class="n">weights</span><span class="p">[</span><span class="n">model_index</span><span class="p">][</span><span class="n">criterion_index</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.1</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">learning_data</span><span class="o">.</span><span class="n">criteria_count</span>
</pre></div>
</div>
<p>Profiles improvement strategies must implement <code class="docutils literal notranslate"><span class="pre">.improve_profiles(model_indexes_begin,</span> <span class="pre">model_indexes_end)</span></code>, that should improve <code class="docutils literal notranslate"><span class="pre">profile_ranks</span></code> for models at indexes in <code class="docutils literal notranslate"><span class="pre">[learning_data.model_index[i]</span> <span class="pre">for</span> <span class="pre">i</span> <span class="pre">in</span> <span class="pre">range(model_indexes_begin,</span> <span class="pre">model_indexes_end)]</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">SillyProfilesImprovementStrategy</span><span class="p">(</span><span class="n">lc</span><span class="o">.</span><span class="n">LearnMrsortByWeightsProfilesBreed</span><span class="o">.</span><span class="n">ProfilesImprovementStrategy</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">learning_data</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">learning_data</span> <span class="o">=</span> <span class="n">learning_data</span>

    <span class="k">def</span> <span class="nf">improve_profiles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_indexes_begin</span><span class="p">,</span> <span class="n">model_indexes_end</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;improve_profiles&quot;</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">model_index_index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">model_indexes_begin</span><span class="p">,</span> <span class="n">model_indexes_end</span><span class="p">):</span>
            <span class="n">model_index</span> <span class="o">=</span> <span class="n">learning_data</span><span class="o">.</span><span class="n">model_indexes</span><span class="p">[</span><span class="n">model_index_index</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">boundary_index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">learning_data</span><span class="o">.</span><span class="n">boundaries_count</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">criterion_index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">learning_data</span><span class="o">.</span><span class="n">criteria_count</span><span class="p">):</span>
                    <span class="n">rank</span> <span class="o">=</span> <span class="p">(</span><span class="n">boundary_index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">learning_data</span><span class="o">.</span><span class="n">values_counts</span><span class="p">[</span><span class="n">criterion_index</span><span class="p">]</span> <span class="o">//</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">learning_data</span><span class="o">.</span><span class="n">boundaries_count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">learning_data</span><span class="o">.</span><span class="n">profile_ranks</span><span class="p">[</span><span class="n">model_index</span><span class="p">][</span><span class="n">boundary_index</span><span class="p">][</span><span class="n">criterion_index</span><span class="p">]</span> <span class="o">=</span> <span class="n">rank</span>
</pre></div>
</div>
<p>Breeding strategies must implement <code class="docutils literal notranslate"><span class="pre">.breed()</span></code>, that should breed all models.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">SillyBreedingStrategy</span><span class="p">(</span><span class="n">lc</span><span class="o">.</span><span class="n">LearnMrsortByWeightsProfilesBreed</span><span class="o">.</span><span class="n">BreedingStrategy</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">learning_data</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">learning_data</span> <span class="o">=</span> <span class="n">learning_data</span>

    <span class="k">def</span> <span class="nf">breed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;breed&quot;</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
</pre></div>
</div>
<p>Termination strategies must implement <code class="docutils literal notranslate"><span class="pre">.terminate()</span></code>, that should return <code class="docutils literal notranslate"><span class="pre">True</span></code> to terminate the learning.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">SillyTerminationStrategy</span><span class="p">(</span><span class="n">lc</span><span class="o">.</span><span class="n">LearnMrsortByWeightsProfilesBreed</span><span class="o">.</span><span class="n">TerminationStrategy</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">learning_data</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">learning_data</span> <span class="o">=</span> <span class="n">learning_data</span>

    <span class="k">def</span> <span class="nf">terminate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;terminate&quot;</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">learning_data</span><span class="o">.</span><span class="n">iteration_index</span> <span class="o">==</span> <span class="mi">3</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">Problem</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="p">(</span><span class="s2">&quot;Criterion 1&quot;</span><span class="p">,</span> <span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="o">.</span><span class="n">RealValues</span><span class="p">(</span><span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="o">.</span><span class="n">PreferenceDirection</span><span class="o">.</span><span class="n">decreasing</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)),</span>
        <span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="p">(</span><span class="s2">&quot;Criterion 2&quot;</span><span class="p">,</span> <span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="o">.</span><span class="n">IntegerValues</span><span class="p">(</span><span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="o">.</span><span class="n">PreferenceDirection</span><span class="o">.</span><span class="n">increasing</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">)),</span>
        <span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="p">(</span><span class="s2">&quot;Criterion 3&quot;</span><span class="p">,</span> <span class="n">lc</span><span class="o">.</span><span class="n">Criterion</span><span class="o">.</span><span class="n">EnumeratedValues</span><span class="p">([</span><span class="s2">&quot;F&quot;</span><span class="p">,</span> <span class="s2">&quot;E&quot;</span><span class="p">,</span> <span class="s2">&quot;D&quot;</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;A&quot;</span><span class="p">])),</span>
    <span class="p">],</span>
    <span class="p">[</span><span class="n">lc</span><span class="o">.</span><span class="n">Category</span><span class="p">(</span><span class="s2">&quot;Bad&quot;</span><span class="p">),</span> <span class="n">lc</span><span class="o">.</span><span class="n">Category</span><span class="p">(</span><span class="s2">&quot;Medium&quot;</span><span class="p">),</span> <span class="n">lc</span><span class="o">.</span><span class="n">Category</span><span class="p">(</span><span class="s2">&quot;Good&quot;</span><span class="p">)],</span>
<span class="p">)</span>
<span class="n">learning_set</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">generate_alternatives</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">lc</span><span class="o">.</span><span class="n">generate_mrsort_model</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">random_seed</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span> <span class="n">alternatives_count</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">random_seed</span><span class="o">=</span><span class="mi">43</span><span class="p">)</span>

<span class="n">learning_data</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">LearnMrsortByWeightsProfilesBreed</span><span class="o">.</span><span class="n">LearningData</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">learning_set</span><span class="p">,</span> <span class="n">models_count</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">random_seed</span><span class="o">=</span><span class="mi">43</span><span class="p">)</span>
<span class="n">profiles_initialization_strategy</span> <span class="o">=</span> <span class="n">SillyProfilesInitializationStrategy</span><span class="p">(</span><span class="n">learning_data</span><span class="p">)</span>
<span class="n">weights_optimization_strategy</span> <span class="o">=</span> <span class="n">SillyWeightsOptimizationStrategy</span><span class="p">(</span><span class="n">learning_data</span><span class="p">)</span>
<span class="n">profiles_improvement_strategy</span> <span class="o">=</span> <span class="n">SillyProfilesImprovementStrategy</span><span class="p">(</span><span class="n">learning_data</span><span class="p">)</span>
<span class="n">breeding_strategy</span> <span class="o">=</span> <span class="n">SillyBreedingStrategy</span><span class="p">(</span><span class="n">learning_data</span><span class="p">)</span>
<span class="n">termination_strategy</span> <span class="o">=</span> <span class="n">SillyTerminationStrategy</span><span class="p">(</span><span class="n">learning_data</span><span class="p">)</span>
</pre></div>
</div>
<p>Here are the logs produced by these silly strategies during the learning:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">learned_model</span> <span class="o">=</span> <span class="n">lc</span><span class="o">.</span><span class="n">LearnMrsortByWeightsProfilesBreed</span><span class="p">(</span>
    <span class="n">learning_data</span><span class="p">,</span>
    <span class="n">profiles_initialization_strategy</span><span class="p">,</span>
    <span class="n">weights_optimization_strategy</span><span class="p">,</span>
    <span class="n">profiles_improvement_strategy</span><span class="p">,</span>
    <span class="n">breeding_strategy</span><span class="p">,</span>
    <span class="n">termination_strategy</span><span class="p">,</span>
<span class="p">)</span><span class="o">.</span><span class="n">perform</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>initialize_profiles 0 9
optimize_weights
improve_profiles
terminate
breed
optimize_weights
improve_profiles
terminate
breed
optimize_weights
improve_profiles
terminate
breed
optimize_weights
improve_profiles
terminate
</pre></div>
</div>
<p>And here is the silly model they produce:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">learned_model</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ncs-classification-model</span>
<span class="nt">format_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="nt">accepted_values</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">thresholds</span>
<span class="w">    </span><span class="nt">thresholds</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">6.94936371</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">3.24692106</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">thresholds</span>
<span class="w">    </span><span class="nt">thresholds</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">33</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">66</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">thresholds</span>
<span class="w">    </span><span class="nt">thresholds</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">D</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">B</span><span class="p p-Indicator">]</span>
<span class="nt">sufficient_coalitions</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nl">&amp;coalitions</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">weights</span>
<span class="w">    </span><span class="nt">criterion_weights</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0.366666675</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.366666675</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.366666675</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nv">*coalitions</span>
</pre></div>
</div>
</section>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">lincs</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">README</a></li>
<li class="toctree-l1"><a class="reference internal" href="conceptual-overview.html">Conceptual overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="get-started.html">Get started</a></li>
<li class="toctree-l1"><a class="reference internal" href="user-guide.html">User Guide</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">The Python API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#do-it-again-in-python">Do it again, in Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="#do-more-with-the-python-api">Do more, with the Python API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#create-classification-objects">Create classification objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="#clone-classification-objects">Clone classification objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="#serialize-classification-objects">Serialize classification objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="#customize-the-model-visualization">Customize the model visualization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-your-own-learning-strategies">Create your own learning strategies</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributor-guide.html">Contributor guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="roadmap.html">Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="user-guide.html" title="previous chapter">User Guide</a></li>
      <li>Next: <a href="reference.html" title="next chapter">Reference</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;Copyright 2023-2024 Vincent Jacques.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="_sources/python-api.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>